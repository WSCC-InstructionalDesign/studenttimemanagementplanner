<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>2-Part Time Management Planner</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1100px; margin: auto; padding: 1em; }
    h2, h3 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; font-size: 0.9em; }
    th, td { border: 1px solid #ccc; padding: 0.5em; text-align: center; vertical-align: top; }
    input[type=number] { width: 60px; }
    .dropzone { background: #f9f9f9; min-height: 3em; }
    .dropzone.over { background: #d0e0ff; }
    .activity { padding: 0.3em 0.6em; margin: 0.2em; border-radius: 4px; cursor: grab; display: inline-block; white-space: nowrap; }
    .legend td, .drag-area { padding: 0.3em 0.5em; }
    .counter, .warning { text-align: center; margin-top: 1em; font-weight: bold; }
    .warning { color: red; }

    /* Color codes */
    .Sleep { background: #cfe2f3; } .Work { background: #f4cccc; } .Personal { background: #fddde6; }
    .Grooming { background: #e6ccff; } .Fitness { background: #d9ead3; } .Household { background: #fff2cc; }
    .Meals { background: #ffe5b4; } .Family { background: #f4cccc; } .Social { background: #fce5cd; }
    .Finance { background: #f9e7d9; } .Academic { background: #d9d9d9; } .Learning { background: #ccf2f4; }
    .Leisure { background: #f2e0f7; } .Errands { background: #daeaf6; }

    .drag-area { display: flex; flex-wrap: wrap; gap: 0.4em; justify-content: center; margin-top: 1em; }
  </style>
</head>
<body>

<h2>Time Management Planner</h2>

<!-- PART 1: TIME ESTIMATES -->
<h3>Part 1: Estimate Your Weekly Time Usage</h3>
<form id="timeForm">
  <table>
    <tr><th>Activity</th><th>Estimated Hours/Week</th></tr>
    <tr><td>ğŸ’¤ Sleep & Rest</td><td><input type="number" name="Sleep" value="56" /></td></tr>
    <tr><td>ğŸ’¼ Work & Career</td><td><input type="number" name="Work" value="20" /></td></tr>
    <tr><td>ğŸ©º Personal Care</td><td><input type="number" name="Personal" value="2" /></td></tr>
    <tr><td>ğŸ§¼ Grooming & Hygiene</td><td><input type="number" name="Grooming" value="5" /></td></tr>
    <tr><td>ğŸ‹ï¸ Exercise & Fitness</td><td><input type="number" name="Fitness" value="4" /></td></tr>
    <tr><td>ğŸ§¹ Household Tasks</td><td><input type="number" name="Household" value="4" /></td></tr>
    <tr><td>ğŸ½ï¸ Cooking & Meals</td><td><input type="number" name="Meals" value="10" /></td></tr>
    <tr><td>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family Time</td><td><input type="number" name="Family" value="6" /></td></tr>
    <tr><td>ğŸ‰ Social Activities</td><td><input type="number" name="Social" value="6" /></td></tr>
    <tr><td>ğŸ’° Financial Mgmt</td><td><input type="number" name="Finance" value="2" /></td></tr>
    <tr><td>ğŸ“– Learning & Development</td><td><input type="number" name="Learning" value="2" /></td></tr>
    <tr><td>ğŸ® Entertainment & Leisure</td><td><input type="number" name="Leisure" value="6" /></td></tr>
    <tr><td>ğŸš— Errands & Transportation</td><td><input type="number" name="Errands" value="4" /></td></tr>
    <tr><td>ğŸ“š Academic Study (2x credit hrs)<br>
      Credit hours: <input type="number" id="credits" value="15" style="width:50px;" onchange="calcStudyHours()" /></td>
      <td><input type="number" name="Academic" id="Academic" readonly /></td></tr>
  </table>
  <div class="counter" id="totalHours">Used: 0 / 168 hours</div>
  <div class="warning" id="overHours" style="display:none;">âš ï¸ Over 168 hours! Adjust your inputs.</div>
  <div style="text-align:center;"><button type="button" onclick="buildFromInputs()">Build Calendar</button></div>
</form>

<!-- PART 2: DRAGGABLE CALENDAR -->
<h3>Part 2: Weekly Calendar â€“ Edit As Needed</h3>
<div class="drag-area" id="dragArea"></div>

<div class="counter" id="calendarHours">Used: 0 / 168 hours</div>
<div class="warning" id="calendarWarning" style="display:none;">âš ï¸ You've exceeded 168 hours!</div>

<table>
  <thead>
    <tr>
      <th>Time</th>
      <th>Sunday</th><th>Monday</th><th>Tuesday</th><th>Wednesday</th>
      <th>Thursday</th><th>Friday</th><th>Saturday</th>
    </tr>
  </thead>
  <tbody id="calendarBody"></tbody>
</table>

<script>
const categories = {
  Sleep: "ğŸ’¤", Work: "ğŸ’¼", Personal: "ğŸ©º", Grooming: "ğŸ§¼", Fitness: "ğŸ‹ï¸",
  Household: "ğŸ§¹", Meals: "ğŸ½ï¸", Family: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", Social: "ğŸ‰", Finance: "ğŸ’°",
  Academic: "ğŸ“š", Learning: "ğŸ“–", Leisure: "ğŸ®", Errands: "ğŸš—"
};
const colors = {
  Sleep: "Sleep", Work: "Work", Personal: "Personal", Grooming: "Grooming",
  Fitness: "Fitness", Household: "Household", Meals: "Meals", Family: "Family",
  Social: "Social", Finance: "Finance", Academic: "Academic", Learning: "Learning",
  Leisure: "Leisure", Errands: "Errands"
};

const timeSlots = Array.from({ length: 17 }, (_, i) => {
  const hour = 6 + i;
  const ampm = hour >= 12 ? 'PM' : 'AM';
  return ((hour - 1) % 12 + 1) + ":00 " + ampm;
});

function calcStudyHours() {
  const credits = parseInt(document.getElementById("credits").value || 0);
  document.getElementById("Academic").value = credits * 2;
  calcTotalHours();
}

function calcTotalHours() {
  const form = document.getElementById("timeForm");
  let total = 0;
  for (const field of form.querySelectorAll("input[type=number]")) {
    if (field.name && field.name !== "Academic") total += parseInt(field.value || 0);
  }
  total += parseInt(document.getElementById("Academic").value || 0);
  document.getElementById("totalHours").textContent = `Used: ${total} / 168 hours`;
  document.getElementById("overHours").style.display = total > 168 ? "block" : "none";
}

document.querySelectorAll("input[type=number]").forEach(i => {
  i.addEventListener("input", calcTotalHours);
});

function buildFromInputs() {
  document.getElementById("dragArea").innerHTML = '';
  const form = document.getElementById("timeForm");
  for (const input of form.querySelectorAll("input[name]")) {
    const cat = input.name;
    const hours = parseInt(input.value || 0);
    for (let i = 0; i < hours; i++) {
      const block = document.createElement("div");
      block.className = `activity ${colors[cat]}`;
      block.textContent = `${categories[cat]} ${cat}`;
      block.setAttribute("draggable", "true");
      block.dataset.type = cat;
      block.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", cat);
      });
      document.getElementById("dragArea").appendChild(block);
    }
  }
}

// Calendar creation
const calendarBody = document.getElementById("calendarBody");
function buildCalendar() {
  for (let i = 0; i < timeSlots.length; i++) {
    const row = document.createElement("tr");
    row.innerHTML = `<td><strong>${timeSlots[i]}</strong></td>`;
    for (let d = 0; d < 7; d++) {
      const cell = document.createElement("td");
      cell.className = "dropzone";
      cell.dataset.filled = "false";
      cell.addEventListener("dragover", e => { e.preventDefault(); cell.classList.add("over"); });
      cell.addEventListener("dragleave", () => cell.classList.remove("over"));
      cell.addEventListener("drop", e => {
        e.preventDefault();
        const type = e.dataTransfer.getData("text/plain");
        const icon = categories[type];
        cell.textContent = `${icon} ${type}`;
        cell.className = `dropzone ${colors[type]}`;
        cell.dataset.filled = "true";
        updateCalendarHours();
      });
      cell.addEventListener("click", () => {
        cell.textContent = "";
        cell.className = "dropzone";
        cell.dataset.filled = "false";
        updateCalendarHours();
      });
      row.appendChild(cell);
    }
    calendarBody.appendChild(row);
  }
}

function updateCalendarHours() {
  let total = 0;
  document.querySelectorAll("td.dropzone").forEach(c => {
    if (c.dataset.filled === "true") total++;
  });
  document.getElementById("calendarHours").textContent = `Used: ${total} / 168 hours`;
  document.getElementById("calendarWarning").style.display = total > 168 ? "block" : "none";
}

// Init
calcStudyHours();
calcTotalHours();
buildCalendar();
</script>

</body>
</html>
