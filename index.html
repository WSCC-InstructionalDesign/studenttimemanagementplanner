<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expanded Time Management Planner</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1100px; margin: auto; padding: 1em; }
    h2, h3 { text-align: center; }
    label { font-weight: bold; display: block; margin-top: 1em; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; font-size: 0.85em; }
    th, td { border: 1px solid #ccc; padding: 0.4em; text-align: center; vertical-align: top; min-height: 3em; }
    td.dropzone { background-color: #f9f9f9; }
    td.dropzone.over { background-color: #d0e0ff; }
    .legend td { padding: 0.3em 0.5em; }

    .activity { padding: 0.3em 0.5em; margin: 0.2em; border-radius: 5px; cursor: grab; display: inline-block; white-space: nowrap; }

    /* Color-coded classes */
    .Sleep { background-color: #cfe2f3; }        .Work { background-color: #f4cccc; }
    .Personal { background-color: #fddde6; }     .Grooming { background-color: #e6ccff; }
    .Fitness { background-color: #d9ead3; }      .Household { background-color: #fff2cc; }
    .Meals { background-color: #ffe5b4; }        .Family { background-color: #f4cccc; }
    .Social { background-color: #fce5cd; }       .Finance { background-color: #f9e7d9; }
    .Academic { background-color: #d9d9d9; }     .Learning { background-color: #ccf2f4; }
    .Leisure { background-color: #f2e0f7; }      .Errands { background-color: #daeaf6; }

    .drag-area { display: flex; flex-wrap: wrap; gap: 0.5em; justify-content: center; margin-bottom: 1em; }
    .counter { font-size: 1.1em; text-align: center; margin-top: 1em; }
    .warning { color: red; font-weight: bold; }
  </style>
</head>
<body>

<h2>Expanded Time Management Calendar</h2>

<!-- Academic Credit Hour Prompt -->
<div style="text-align:center;">
  <label>How many academic credit hours are you enrolled in?</label>
  <input type="number" id="credits" value="15" style="width:60px;" onchange="updateAcademicBlock()" />
</div>

<h3>Step 1: Drag activities into the calendar</h3>

<div class="drag-area" aria-label="Activity blocks">
  <div class="activity Sleep" draggable="true" data-type="Sleep">ğŸ’¤ Sleep & Rest</div>
  <div class="activity Work" draggable="true" data-type="Work">ğŸ’¼ Work & Career</div>
  <div class="activity Personal" draggable="true" data-type="Personal">ğŸ©º Personal Care</div>
  <div class="activity Grooming" draggable="true" data-type="Grooming">ğŸ§¼ Grooming</div>
  <div class="activity Fitness" draggable="true" data-type="Fitness">ğŸ‹ï¸ Exercise</div>
  <div class="activity Household" draggable="true" data-type="Household">ğŸ§¹ Household Tasks</div>
  <div class="activity Meals" draggable="true" data-type="Meals">ğŸ½ï¸ Cooking & Meals</div>
  <div class="activity Family" draggable="true" data-type="Family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family Time</div>
  <div class="activity Social" draggable="true" data-type="Social">ğŸ‰ Social Activities</div>
  <div class="activity Finance" draggable="true" data-type="Finance">ğŸ’° Financial Mgmt</div>
  <div class="activity Academic" draggable="true" data-type="Academic" id="academicBlock">ğŸ“š Academic Study (30 hrs)</div>
  <div class="activity Learning" draggable="true" data-type="Learning">ğŸ“– Learning & Dev</div>
  <div class="activity Leisure" draggable="true" data-type="Leisure">ğŸ® Entertainment</div>
  <div class="activity Errands" draggable="true" data-type="Errands">ğŸš— Errands</div>
</div>

<div class="counter" id="hourCounter">Used: 0 / 168 hours</div>
<div class="counter warning" id="warningMsg" style="display:none;">âš ï¸ Youâ€™ve exceeded 168 hours!</div>

<!-- Calendar Grid -->
<h3>Step 2: Weekly Schedule</h3>
<table>
  <thead>
    <tr>
      <th>Time</th>
      <th>Sunday</th><th>Monday</th><th>Tuesday</th><th>Wednesday</th>
      <th>Thursday</th><th>Friday</th><th>Saturday</th>
    </tr>
  </thead>
  <tbody id="calendarBody"></tbody>
</table>

<script>
const times = Array.from({ length: 17 }, (_, i) => {
  const hour = 6 + i;
  const period = hour >= 12 ? 'PM' : 'AM';
  const display = ((hour - 1) % 12 + 1) + ':00 ' + period;
  return display;
});

const calendarBody = document.getElementById("calendarBody");
const hourCounter = document.getElementById("hourCounter");
const warningMsg = document.getElementById("warningMsg");
const academicBlock = document.getElementById("academicBlock");

function updateHourCount() {
  const cells = document.querySelectorAll("td.dropzone");
  let total = 0;
  cells.forEach(cell => {
    if (cell.dataset.filled === "true") total++;
  });
  hourCounter.textContent = `Used: ${total} / 168 hours`;
  warningMsg.style.display = total > 168 ? "block" : "none";
}

function updateAcademicBlock() {
  const credits = parseInt(document.getElementById("credits").value || 0);
  const hours = credits * 2;
  academicBlock.innerText = `ğŸ“š Academic Study (${hours} hrs)`;
}

function createCalendar() {
  for (let i = 0; i < times.length; i++) {
    const row = document.createElement("tr");
    row.innerHTML = `<td><strong>${times[i]}</strong></td>`;
    for (let day = 0; day < 7; day++) {
      const cell = document.createElement("td");
      cell.classList.add("dropzone");
      cell.dataset.filled = "false";
      cell.addEventListener("dragover", e => {
        e.preventDefault();
        cell.classList.add("over");
      });
      cell.addEventListener("dragleave", () => cell.classList.remove("over"));
      cell.addEventListener("drop", e => {
        e.preventDefault();
        cell.classList.remove("over");
        const type = e.dataTransfer.getData("text/plain");
        if (!cell.dataset.filled || cell.dataset.filled === "false") {
          const icon = document.querySelector(`.activity[data-type="${type}"]`).innerText.split(" ")[0];
          cell.innerText = icon + " " + type;
          cell.className = `dropzone ${type}`;
          cell.dataset.filled = "true";
          updateHourCount();
        }
      });
      cell.addEventListener("click", () => {
        cell.innerText = "";
        cell.className = "dropzone";
        cell.dataset.filled = "false";
        updateHourCount();
      });
      row.appendChild(cell);
    }
    calendarBody.appendChild(row);
  }
}

document.querySelectorAll(".activity").forEach(item => {
  item.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", e.target.dataset.type);
  });
});

createCalendar();
updateAcademicBlock();
updateHourCount();
</script>

</body>
</html>

